
{% extends "base.html" %}
{% block title %}{% if mode == 'edit' %}Modifier{% else %}Ajouter{% endif %} un type{% endblock %}
{% block content %}
<section class="page-section">
  <h2>{% if mode == 'edit' %}Modifier{% else %}Ajouter{% endif %} un type de site</h2>
  <form method="post" class="form-panel">
    <div class="field">
      <label for="type">Type*</label>
      <input type="text" id="type" name="type" value="{{ type_payload.type }}" {% if mode == 'edit' %}readonly{% endif %} required>
      {% if mode == 'edit' %}<small>Le libell√© ne peut pas √™tre modifi√©.</small>{% endif %}
    </div>
    <div class="field">
      <label for="group">Groupe</label>
      <input type="text" id="group" name="group" value="{{ type_payload.group }}" placeholder="Nom du groupe affich√© dans la carte">
    </div>
    <div class="field">
      <label for="icon">Ic√¥ne*</label>
      <select id="icon" name="icon" required>
        <option value="">- choisir une ic√¥ne -</option>
        {% for icon in icon_choices %}
          <option value="{{ icon }}" {% if type_payload.icon == icon %}selected{% endif %}>{{ icon }}</option>
        {% endfor %}
      </select>
    </div>
    <div class="field-inline">
      <label for="scale">√âchelle</label>
      <input type="number" step="0.1" min="0.1" id="scale" name="scale" value="{{ type_payload.scale or 1 }}">
    </div>
    <div class="checkbox-group">
      <label><input type="checkbox" name="enabled" {% if type_payload.enabled %}checked{% endif %}> Activ√©</label>
      <label><input type="checkbox" name="cluster" {% if type_payload.cluster %}checked{% endif %}> Utiliser un cluster</label>
      <label><input type="checkbox" name="show" {% if type_payload.show %}checked{% endif %}> Visible par d√©faut</label>
    </div>
    <div class="actions">
      <button type="submit" class="btn primary btn-icon">üíæ Enregistrer</button>
      <a class="btn secondary btn-icon" href="{{ url_for('type_sites.list_type_sites') }}">‚Ü© Annuler</a>
    </div>
  </form>
</section>

<style>
  .page-section { max-width: 700px; margin: 2rem auto; background: #1a242f; padding: 2rem; border-radius: 10px; }
  .form-panel { display: flex; flex-direction: column; gap: 1rem; }
  .field, .field-inline { display: flex; flex-direction: column; gap: 0.4rem; }
  .field input, .field select, .field-inline input { padding: 0.6rem 0.7rem; border-radius: 6px; border: 1px solid #2b3947; background: #101820; color: #fff; }
  .field-inline { max-width: 200px; }
  .checkbox-group { display: flex; gap: 1rem; flex-wrap: wrap; }
  .checkbox-group label { display: flex; align-items: center; gap: 0.4rem; }
  .checkbox-group input { width: auto; }
  .actions { display: flex; gap: 1rem; margin-top: 1rem; }
  .actions button { background: #0c151c; color: #fff; border: none; padding: 0.6rem 1.2rem; border-radius: 6px; cursor: pointer; }
  .actions button, .actions .secondary { display: inline-flex; align-items: center; gap: 0.4rem; }
  .actions button:hover { background: #15212c; }
  .actions .secondary { color: #9fb3c8; text-decoration: none; align-self: center; }
  .actions .secondary:hover { text-decoration: underline; }
</style>
{% endblock %}
